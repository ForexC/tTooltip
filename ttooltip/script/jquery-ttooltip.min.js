/*!
 * tTooltip v0.1
 *
 * Copyright 2012 Takien, No Inc
 * http://takien.com
 * 
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * follow @cektkp and @perdanaweb
 */
(function(a){function b(b){var c=b.position();var d=c.top-a(window).scrollTop();var e=c.left-a(window).scrollLeft();var f=a(window).width()-(e+b.width());var g=a(window).height()-(d+b.height());var h="topleft";if(d>g){h="bottom"}else{h="top"}if(e>f){h+="right"}else{h+="left"}return h}a.fn.ttooltip=function(c){var d=a.extend({},a.fn.ttooltip.defaultOptions,c);var e=a(d.template);var f=e.find(".ttooltip-content");var g=e.find(".ttooltip-title");var h=e.find(".ttooltip-footer");e.css({position:"absolute","max-width":d.maxwidth});return this.each(function(c){var i=a(this);i.bind(d.trigger,function(c){function s(a){a.fadeOut().remove()}e.appendTo(document.body);e=a(".ttooltip-wrap");f=e.find(".ttooltip-content");g=e.find(".ttooltip-title");h=e.find(".ttooltip-footer");var j=i.attr("data-title");var k=i.attr("data-content");var l=i.attr("data-footer");var m=i.attr("href");var n=i.attr("data-width");f.addClass("clearfix");h.addClass("clearfix");e.removeClass().addClass("ttooltip-wrap ttooltip-"+b(i)).fadeIn();var p=e.find(".ttooltip-arrow");var q=c.pageX-(p.outerWidth()*.5+p.position().left);var r;if(k=="ajax"){a.get(m,function(a){e.find(".ttooltip-inner").html(a)})}else{g.show().html(j);f.show().html(k);h.show().html(l);if(l==undefined){h.hide()}if(j==undefined){g.hide()}}r=i.position().top+i.outerHeight()+p.outerHeight();if(b(i)=="bottomright"||b(i)=="bottomleft"){r=i.position().top-e.outerHeight()-p.outerHeight()}e.css({top:r,left:q,width:n,opacity:1}).fadeIn();if(d.followmouse){a(this).mousemove(function(a){e.css({top:r,left:a.pageX-p.position().left})})}if(d.autohide){e.bind(d.close,function(){s(e)})}if(d.closeonesc){document.onkeydown=function(a){a=a||window.event;if(a.keyCode==27){s(e)}}}c.preventDefault()})})};a.fn.ttooltip.defaultOptions={autohide:true,followmouse:true,closeonesc:true,content:"",title:"",trigger:"mouseenter",close:"mouseleave",maxwidth:500,template:'<div class="ttooltip-wrap"><div class="ttooltip-arrow ttooltip-arrow-border"></div><div class="ttooltip-arrow"></div><div class="ttooltip-inner"><h3 class="ttooltip-title"></h3><div class="ttooltip-content"><p></p></div><div class="ttooltip-footer"></div></div></div>'}})(jQuery)